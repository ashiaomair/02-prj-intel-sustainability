<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intel: Sustainability Through the Ages</title>
  <!-- Add Google Fonts Inter -->
  <link href="https://fonts.googleapis.com/css?family=Inter:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Header / Hero Section -->
  <header>
    <div>
      <!-- Ask Copilot to teach you about `.svg` ðŸ™‚ -->
      <img src="img/intel-header-logo.svg" alt="Intel Logo" />
      <!-- Main Heading -->
      <h1 class="sustainability-heading">
        Sustainability Through the Ages
      </h1>

      <!-- Subheading / Description -->
      <p class="sustainability-text">
        Explore Intel's journey through time, discovering how our commitment
        to innovation has shaped a more sustainable future for technology 
        and our planet.
      </p>
    </div>
  </header>

  <!-- Timeline Cards Section -->
  <section>
    <!-- Image Roulette: All timeline images in a horizontal scrollable row -->
    <div class="roulette-wrapper">
      <!-- Add left arrow button -->
      <button class="roulette-arrow left" id="rouletteLeft" aria-label="Scroll left">&#8592;</button>
      <div class="timeline-roulette" id="timelineRoulette">
        <!-- Each image and its year label, both will be cloned for endless effect by JavaScript -->
        <div class="roulette-item">
          <span class="roulette-year">1968</span>
          <img src="img/1.jpg" alt="1968" class="roulette-img" id="img0" data-logical-idx="0" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">Intel Founded</span>
            <span class="roulette-overlay-line"></span>
            Intel is founded by Robert Noyce and Gordon Moore.
          </div>
        </div>
        <div class="roulette-item">
          <span class="roulette-year">1971</span>
          <img src="img/2.jpg" alt="1971" class="roulette-img" id="img1" data-logical-idx="1" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">First Microprocessor</span>
            <span class="roulette-overlay-line"></span>
            The first commercial microprocessor, the 4004, is released.
          </div>
        </div>
        <div class="roulette-item">
          <span class="roulette-year">1978</span>
          <img src="img/3.jpg" alt="1978" class="roulette-img" id="img2" data-logical-idx="2" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">8086 Processor</span>
            <span class="roulette-overlay-line"></span>
            The 8086 processor launches, starting the x86 era.
          </div>
        </div>
        <div class="roulette-item">
          <span class="roulette-year">1985</span>
          <img src="img/4.jpg" alt="1985" class="roulette-img" id="img3" data-logical-idx="3" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">386 Processor</span>
            <span class="roulette-overlay-line"></span>
            The 386 processor brings 32-bit computing to PCs.
          </div>
        </div>
        <div class="roulette-item">
          <span class="roulette-year">2006</span>
          <!-- Generated image: factory with smoke and a globe, representing emissions -->
          <img src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=300&q=80" alt="2006 factory emissions" class="roulette-img" id="img4" data-logical-idx="4" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">Peak GHG Emissions</span>
            <span class="roulette-overlay-line"></span>
            Intel's peak greenhouse gas emissions year.
          </div>
        </div>
        <div class="roulette-item">
          <span class="roulette-year">2020</span>
          <!-- Generated image: green leaf and hands holding a globe, representing RISE strategy -->
          <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=300&q=80" alt="2020 RISE strategy" class="roulette-img" id="img5" data-logical-idx="5" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">RISE Strategy</span>
            <span class="roulette-overlay-line"></span>
            Intel launches its RISE strategy and 2030 goals.
          </div>
        </div>
        <div class="roulette-item">
          <span class="roulette-year">2022</span>
          <!-- Generated image: zero, leaf, and globe for net-zero, using a clear earth/leaf photo -->
          <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=300&q=80" alt="2022 net zero" class="roulette-img" id="img6" data-logical-idx="6" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">Net-Zero By 2040</span>
            <span class="roulette-overlay-line"></span>
            Intel commits to net-zero greenhouse gas emissions by 2040.
          </div>
        </div>
        <div class="roulette-item">
          <span class="roulette-year">2023</span>
          <!-- Generated image: sun, wind turbine, and plug for renewable electricity -->
          <img src="https://api.dicebear.com/7.x/icons/svg?seed=sun,wind,plug&backgroundColor=3fa9f5,e6f6ff&backgroundType=gradientLinear&icon=sun" alt="2023" class="roulette-img" id="img7" data-logical-idx="7" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">Renewable Electricity</span>
            <span class="roulette-overlay-line"></span>
            Intel achieves 99% renewable electricity usage worldwide.
          </div>
        </div>
        <div class="roulette-item">
          <span class="roulette-year">2024</span>
          <!-- Better image: people at a conference table, representing a summit -->
          <img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=300&q=80" alt="2024 Sustainability Summit conference" class="roulette-img" id="img8" data-logical-idx="8" />
          <div class="roulette-overlay">
            <span class="roulette-overlay-heading">Sustainability Summit</span>
            <span class="roulette-overlay-line"></span>
            Intel hosts its first Sustainability Summit.
          </div>
        </div>
      </div>
      <!-- Add right arrow button -->
      <button class="roulette-arrow right" id="rouletteRight" aria-label="Scroll right">&#8594;</button>
    </div>
    <!-- Dots for the roulette navigation -->
    <div class="roulette-dots" id="rouletteDotsWrapper">
      <div class="roulette-dots-inner" id="rouletteDots">
        <!-- Dots will be generated by JavaScript -->
      </div>
    </div>
  </section>
  

  <!-- Simple script to handle roulette centering and dots -->
  <script>
    function getOriginalRouletteImgs() {
      return Array.from(document.querySelectorAll('.roulette-img:not(.clone)'));
    }

    function getAllRouletteImgs() {
      return Array.from(document.querySelectorAll('.roulette-img'));
    }
    // Beginner-friendly endless roulette with dot navigation and keyboard support

    const roulette = document.getElementById('timelineRoulette');
    const dotsContainer = document.getElementById('rouletteDots');
    let images = Array.from(roulette.querySelectorAll('.roulette-img'));
    const visibleCount = 3; // Show 3 images at a time
    let currentIndex = 0; // Track the currently centered image

    // Helper to add click event to any image (original or clone)
    function addImageClickHandler(img) {
      img.style.cursor = "pointer";
      img.onclick = () => {
        let logicalIdx = parseInt(img.getAttribute('data-logical-idx'));
        scrollToLogicalImage(logicalIdx, false);
      };
    }

    // Helper to clone a roulette-item (year + image) for endless effect
    function cloneRouletteItem(item) {
      const clone = item.cloneNode(true);
      clone.classList.add('clone');
      // Add click handler to the image inside the clone
      const img = clone.querySelector('.roulette-img');
      if (img) addImageClickHandler(img);
      return clone;
    }

    // Clone items for endless effect (clone all to start and end)
    function setupEndlessRoulette() {
      const timelineRoulette = document.getElementById('timelineRoulette');
      const items = Array.from(timelineRoulette.querySelectorAll('.roulette-item:not(.clone)'));
      timelineRoulette.innerHTML = '';
      // Clone last N items to the start
      const clonesStart = items.slice(-visibleCount).map(cloneRouletteItem);
      // Clone first N items to the end
      const clonesEnd = items.slice(0, visibleCount).map(cloneRouletteItem);
      // Add clones and originals to the container
      clonesStart.forEach(clone => timelineRoulette.appendChild(clone));
      items.forEach(item => {
        // Add click handler to original image
        const img = item.querySelector('.roulette-img');
        if (img) addImageClickHandler(img);
        timelineRoulette.appendChild(item);
      });
      clonesEnd.forEach(clone => timelineRoulette.appendChild(clone));
    }

    // Set the width of the roulette so only 3 images are visible
    roulette.style.maxWidth = (100 * visibleCount + 2 * 4 * visibleCount + 2 * 1 * 16) + 'px';

    // Create dots and link to images
    function setupDots() {
      const dotsInner = document.getElementById('rouletteDots');
      dotsInner.innerHTML = '';
      const total = images.length;
      for (let i = 0; i < total + 2; i++) {
        const idx = (i - 1 + total) % total;
        const dot = document.createElement('span');
        dot.className = 'roulette-dot';
        dot.dataset.index = idx;
        dot.onclick = () => {
          scrollToLogicalImage(idx, true);
        };
        dotsInner.appendChild(dot);
      }
    }

    // Update dots so only 3 are visible and the active one is centered
    function updateDots() {
      const dotsInner = document.getElementById('rouletteDots');
      const allDots = Array.from(dotsInner.querySelectorAll('.roulette-dot'));
      const total = images.length;
      let activeIdx = currentIndex;
      allDots.forEach(dot => dot.style.display = 'none');
      for (let i = -1; i <= 1; i++) {
        let idx = (activeIdx + i + total) % total;
        allDots.forEach(dot => {
          if (parseInt(dot.dataset.index) === idx) {
            dot.style.display = 'inline-block';
          }
        });
      }
      allDots.forEach(dot => {
        dot.classList.toggle('active', parseInt(dot.dataset.index) === activeIdx);
      });
    }

    // Add arrow button functionality for endless navigation
    function setupArrowButtons() {
      const leftBtn = document.getElementById('rouletteLeft');
      const rightBtn = document.getElementById('rouletteRight');
      leftBtn.onclick = () => {
        // Endless: always go to previous (wraps around)
        let prev = (currentIndex - 1 + images.length) % images.length;
        scrollToLogicalImage(prev, false);
      };
      rightBtn.onclick = () => {
        // Endless: always go to next (wraps around)
        let next = (currentIndex + 1) % images.length;
        scrollToLogicalImage(next, false);
      };
    }

    // Scroll to the closest visible image (original or clone) for a given logical index
    // If forceJump is true, jump directly to the original image (for dot clicks)
    function scrollToLogicalImage(logicalIdx, forceJump = false) {
      const allImgs = getAllRouletteImgs();
      const originals = getOriginalRouletteImgs();
      const matches = allImgs.filter(img =>
        parseInt(img.getAttribute('data-logical-idx')) === logicalIdx
      );

      const rouletteRect = roulette.getBoundingClientRect();
      const rouletteCenter = rouletteRect.left + rouletteRect.width / 2;

      const getImgWidth = () => {
        const style = getComputedStyle(originals[0]);
        return originals[0].offsetWidth +
          parseFloat(style.marginLeft) +
          parseFloat(style.marginRight);
      };
      const imgWidth = getImgWidth();

      if (forceJump) {
        const originalIndex = images.findIndex(img => parseInt(img.dataset.logicalIdx) === logicalIdx);
        roulette.scrollLeft = imgWidth * (visibleCount + originalIndex);
        currentIndex = logicalIdx; // âœ… Only set it her
      } else {
        let minDiff = Infinity;
        let closestImg = matches[0];
        matches.forEach(img => {
          const imgRect = img.getBoundingClientRect();
          const imgCenter = imgRect.left + imgRect.width / 2;
          const diff = Math.abs(imgCenter - rouletteCenter);
          if (diff < minDiff) {
            minDiff = diff;
            closestImg = img;
          }
        });
        const closestRect = closestImg.getBoundingClientRect();
        roulette.scrollBy({
          left: closestRect.left - rouletteRect.left - (rouletteRect.width / 2) + (closestRect.width / 2),
          behavior: 'smooth'
        });
      }

      currentIndex = logicalIdx;
    }

    // Helper to find the centered image (ignoring clones)
    function updateRoulette() {
      const allImgs = getAllRouletteImgs();
      const rouletteRect = roulette.getBoundingClientRect();
      let minDiff = Infinity;
      let centerIdx = 0;
      allImgs.forEach((img, idx) => {
        const imgRect = img.getBoundingClientRect();
        const imgCenter = imgRect.left + imgRect.width / 2;
        const rouletteCenter = rouletteRect.left + rouletteRect.width / 2;
        const diff = Math.abs(imgCenter - rouletteCenter);
        if (diff < minDiff) {
          minDiff = diff;
          centerIdx = idx;
        }
        img.classList.remove('roulette-img-active');
        // Also update the year label style for active
        const parent = img.parentElement;
        if (parent && parent.classList.contains('roulette-item')) {
          parent.querySelector('.roulette-year').classList.remove('roulette-year-active');
        }
      });
      allImgs[centerIdx].classList.add('roulette-img-active');
      // Highlight the year above the active image
      const activeParent = allImgs[centerIdx].parentElement;
      if (activeParent && activeParent.classList.contains('roulette-item')) {
        activeParent.querySelector('.roulette-year').classList.add('roulette-year-active');
      }
      let logicalIdx = parseInt(allImgs[centerIdx].getAttribute('data-logical-idx'));
      currentIndex = logicalIdx;
      updateDots();
    }

    // Endless scroll logic: jump to real images when scrolling past clones
function handleEndlessScroll() {
  const allImgs = getAllRouletteImgs();
  const sampleItem = allImgs[0].closest('.roulette-item');
  const style = getComputedStyle(sampleItem);
  const itemWidth = sampleItem.offsetWidth +
    parseFloat(style.marginLeft) +
    parseFloat(style.marginRight);

  const total = images.length;

  const totalScrollWidth = itemWidth * (total + 2 * visibleCount);

if (roulette.scrollLeft <= itemWidth * 0.5) {
  // Scrolled too far left (into clones), reset to real items at the end
  roulette.scrollLeft += itemWidth * total;
} else if (roulette.scrollLeft >= totalScrollWidth - itemWidth * (visibleCount + 0.5)) {
  // Scrolled too far right (into clones), reset to real items at the beginning
  roulette.scrollLeft -= itemWidth * total;
}
}
    // Keyboard navigation for left/right arrow keys (endless)
    function handleKeydown(e) {
      if (e.key === "ArrowRight") {
        // Always go to next (endless)
        let next = (currentIndex + 1) % images.length;
        scrollToLogicalImage(next);
      } else if (e.key === "ArrowLeft") {
        // Always go to previous (endless)
        let prev = (currentIndex - 1 + images.length) % images.length;
        scrollToLogicalImage(prev);
      }
    }

    // Setup everything on load
   window.addEventListener('DOMContentLoaded', () => {
  images = getOriginalRouletteImgs();
  setupEndlessRoulette();
  setupDots();
  setupArrowButtons();

  // Wait for layout to stabilize
  setTimeout(() => {
    const allImgs = getAllRouletteImgs();
    const sampleItem = allImgs[0].closest('.roulette-item');
    const style = getComputedStyle(sampleItem);
    const itemWidth = sampleItem.offsetWidth +
      parseFloat(style.marginLeft) +
      parseFloat(style.marginRight);

    // Scroll directly to first real image (after prepended clones)
    roulette.scrollLeft = itemWidth * visibleCount;

    updateRoulette();
  }, 100);
});
    // Update on scroll and on load
    roulette.addEventListener('scroll', () => {
      handleEndlessScroll();
      window.requestAnimationFrame(updateRoulette);
    });
    window.addEventListener('resize', updateRoulette);

    // Listen for keyboard arrow keys
    window.addEventListener('keydown', handleKeydown);
  </script>
</body>
</html>
